# Example 03: Function Calling and Tool Selection

Demonstrates small local models selecting the correct tool and generating correct parameters from natural language requests. This is the backbone of agentic workflows, and small models have published evidence of strong performance here (ToolBench: 350M model at 77.5% vs ChatGPT-CoT at 26%).

## Scenarios

### Developer Toolbox
8 developer tools (search_code, read_file, run_tests, create_file, edit_file, git_status, list_files, explain_code). 20 natural language requests mapped to the correct tool and parameters.

### Home Automation
10 smart home functions (set_thermostat, toggle_light, lock_door, set_alarm, play_music, check_weather, set_timer, send_notification, camera_snapshot, run_scene). 20 natural language commands mapped to the correct function call.

## Running

```bash
# Run both scenarios with default model
go run . -model qwen3:4b

# Run a specific scenario
go run . -model qwen3:4b -scenario developer
go run . -model ministral:3b -scenario home

# Score results
go run . -score

# Generate comparison report
go run . -report
```

Or from the project root:

```bash
make run-example EXAMPLE=function-calling MODEL=qwen3:4b
make score EXAMPLE=function-calling
make report EXAMPLE=function-calling
```

## Scoring

Three metrics per scenario:
- **Tool selection accuracy:** Did the model pick the right tool?
- **Parameter accuracy:** Did the model provide correct parameter values?
- **Combined accuracy:** Both tool AND all parameters correct

Parameter matching checks expected keys only -- extra parameters from the model are tolerated. Values are compared case-insensitively.

## Expected Results

Ministral-3-3B is the headline candidate here -- purpose-built for function calling. We expect >90% tool selection accuracy from most 3B+ models, with parameter accuracy being the differentiator.

## Files

```
tools/developer.json             # Developer tool catalog (8 tools)
tools/home-automation.json       # Home automation tool catalog (10 tools)
testdata/developer.json          # 20 developer requests
testdata/home-automation.json    # 20 home automation requests
expected/developer.json          # Ground truth tool calls
expected/home-automation.json    # Ground truth tool calls
results/                         # Model outputs (generated by running)
```
